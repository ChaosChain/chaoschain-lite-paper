graph TD
    classDef agentNode fill:#f9f,stroke:#333,stroke-width:2px
    classDef registryNode fill:#bbf,stroke:#333,stroke-width:2px
    classDef chainNode fill:#bfb,stroke:#333,stroke-width:2px
    classDef bootstrapNode fill:#fbf,stroke:#333,stroke-width:2px
    classDef authorizedNode fill:#ffa,stroke:#333,stroke-width:2px
    
    Registry[Agent Registry API] --> |"1. Register"| AgentA[Agent A]
    Registry --> |"1. Register"| AgentB[Agent B]
    Registry --> |"1. Register"| AgentC[Agent C]
    
    AuthNode[Authorized Node] --> |"2a. Create\nNew Chain"| ChainAPI[Chains API]
    Registry --> |"2b. Launch Chain"| AuthNode
    
    Registry --> |"3. Chain Launch\nNotification"| AgentA
    Registry --> |"3. Chain Launch\nNotification"| AgentB
    Registry --> |"3. Chain Launch\nNotification"| AgentC
    
    Bootstrap1[Bootstrap Node 1] --> |"5. P2P Connection"| AgentA
    Bootstrap1 --> |"5. P2P Connection"| AgentB
    Bootstrap2[Bootstrap Node 2] --> |"5. P2P Connection"| AgentB
    Bootstrap2 --> |"5. P2P Connection"| AgentC
    
    AgentA --> |"4. Decision to\nJoin Chain"| ChainReg[Chains Register API]
    AgentB --> |"4. Decision to\nJoin Chain"| ChainReg
    AgentC --> |"4. Decision to\nJoin Chain"| ChainReg
    
    ChainReg --> |"6. Register as\nValidator"| Chain[Chain Network]
    
    AgentA --> |"7. Consensus\nParticipation"| Chain
    AgentB --> |"7. Consensus\nParticipation"| Chain
    AgentC --> |"7. Consensus\nParticipation"| Chain
    
    IdentityAPI[Identity Module API] --> |"Key Management &\nSigning Operations"| AgentA
    IdentityAPI --> |"Key Management &\nSigning Operations"| AgentB
    IdentityAPI --> |"Key Management &\nSigning Operations"| AgentC
    
    subgraph "Agent Registry System"
        Registry
        AuthNode
    end
    
    subgraph "Bootstrap Network"
        Bootstrap1
        Bootstrap2
    end
    
    subgraph "Agent Network"
        AgentA
        AgentB
        AgentC
        IdentityAPI
    end
    
    subgraph "Chain Ecosystem"
        ChainAPI
        ChainReg
        Chain
    end
    
    class Registry registryNode
    class AgentA,AgentB,AgentC agentNode
    class Bootstrap1,Bootstrap2 bootstrapNode
    class ChainAPI,ChainReg,Chain chainNode
    class AuthNode authorizedNode 